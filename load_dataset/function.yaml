kind: job
metadata:
  name: load-dataset
  tag: ''
  hash: 47b609730412e25396d17044e27e7b91a2106381
  project: ''
  labels:
    author: yjb
    stage: development
  categories:
  - datagen
  - fileutils
spec:
  command: ''
  args: []
  image: mlrun/ml-models:0.4.6
  env: []
  default_handler: get_toy_data
  description: ''
  image_pull_policy: Always
  build:
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOCBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAojCiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiMgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgppbXBvcnQgb3MKaW1wb3J0IGpzb24KZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQgcGFuZGFzIGFzIHBkCmZyb20gY2xvdWRwaWNrbGUgaW1wb3J0IGR1bXAsIGxvYWQKCmZyb20gbWxydW4uZXhlY3V0aW9uIGltcG9ydCBNTENsaWVudEN0eApmcm9tIG1scnVuLmRhdGFzdG9yZSBpbXBvcnQgRGF0YUl0ZW0KCmZyb20gdHlwaW5nIGltcG9ydCBJTywgQW55U3RyLCBVbmlvbiwgTGlzdCwgT3B0aW9uYWwKCmRlZiBnZXRfdG95X2RhdGEoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIGRhdGFzZXQ6IHN0ciwKICAgIHBhcmFtczogZGljdCA9IHt9LAogICAgZm9ybWF0OiBzdHIgPSAicGFycXVldCIKKSAtPiBOb25lOgogICAgIiIiTG9hZHMgYSBzY2lraXQtbGVhcm4gdG95IGRhdGFzZXQgZm9yIGNsYXNzaWZpY2F0aW9uIG9yIHJlZ3Jlc3Npb24KICAgIAogICAgVGhlIGZvbGxvd2luZyBkYXRhc2V0cyBhcmUgYXZhaWxhYmxlICgnbmFtZScgOiBkZXNyaXB0aW9uKToKICAgIAogICAgICAgICdib3N0b24nICAgICAgICAgIDogYm9zdG9uIGhvdXNlLXByaWNlcyBkYXRhc2V0IChyZWdyZXNzaW9uKQogICAgICAgICdpcmlzJyAgICAgICAgICAgIDogaXJpcyBkYXRhc2V0IChjbGFzc2lmaWNhdGlvbikKICAgICAgICAnZGlhYmV0ZXMnICAgICAgICA6IGRpYWJldGVzIGRhdGFzZXQgKHJlZ3Jlc3Npb24pCiAgICAgICAgJ2RpZ2l0cycgICAgICAgICAgOiBkaWdpdHMgZGF0YXNldCAoY2xhc3NpZmljYXRpb24pCiAgICAgICAgJ2xpbm5lcnVkJyAgICAgICAgOiBsaW5uZXJ1ZCBkYXRhc2V0IChtdWx0aXZhcmlhdGUgcmVncmVzc2lvbikKICAgICAgICAnd2luZScgICAgICAgICAgICA6IHdpbmUgZGF0YXNldCAoY2xhc3NpZmljYXRpb24pCiAgICAgICAgJ2JyZWFzdF9jYW5jZXInICAgOiBicmVhc3QgY2FuY2VyIHdpc2NvbnNpbiBkYXRhc2V0IChjbGFzc2lmaWNhdGlvbikKICAgIAogICAgVGhlIHNjaWtpdC1sZWFybiBmdW5jdGlvbnMgcmV0dXJuIGEgZGF0YSBidW5jaCBpbmNsdWRpbmcgdGhlIGZvbGxvd2luZyBpdGVtczoKICAgIC0gZGF0YSAgICAgICAgICAgICAgdGhlIGZlYXR1cmVzIG1hdHJpeAogICAgLSB0YXJnZXQgICAgICAgICAgICB0aGUgZ3JvdW5kIHRydXRoIGxhYmVscwogICAgLSBERVNDUiAgICAgICAgICAgICBhIGRlc2NyaXB0aW9uIG9mIHRoZSBkYXRhc2V0CiAgICAtIGZlYXR1cmVfbmFtZXMgICAgIGhlYWRlciBmb3IgZGF0YQogICAgCiAgICBUaGUgZmVhdHVyZXMgKGFuZCB0aGVpciBuYW1lcykgYXJlIHN0b3JlZCB3aXRoIHRoZSB0YXJnZXQgbGFiZWxzIGluIGEgRGF0YUZyYW1lLgoKICAgIEZvciBmdXJ0aGVyIGRldGFpbHMgc2VlIGh0dHBzOi8vc2Npa2l0LWxlYXJuLm9yZy9zdGFibGUvZGF0YXNldHMvaW5kZXguaHRtbCN0b3ktZGF0YXNldHMKICAgIAogICAgOnBhcmFtIGNvbnRleHQ6ICAgIGZ1bmN0aW9uIGV4ZWN1dGlvbiBjb250ZXh0CiAgICA6cGFyYW0gZGF0YXNldDogICAgbmFtZSBvZiB0aGUgZGF0YXNldCB0byBsb2FkIAogICAgOnBhcmFtIHBhcmFtczogICAgIHBhcmFtcyBvZiB0aGUgc2tsZWFybiBsb2FkX2RhdGEgbWV0aG9kCiAgICA6cGFyYW0gZm9ybWF0OiAgICAgc2F2ZSBmb3JtYXQKICAgICIiIgogICAgb3MubWFrZWRpcnMoY29udGV4dC5hcnRpZmFjdF9wYXRoLCBleGlzdF9vaz1UcnVlKQogICAgCiAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihjb250ZXh0LmFydGlmYWN0X3BhdGgsIGRhdGFzZXQpICsgJy5wYXJxdWV0JwogICAgCiAgICAjIGNoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlbid0IGFscmVhZHkgZG93bmxvYWRlZCB0aGUgZmlsZQogICAgaWYgbm90IG9zLnBhdGguaXNmaWxlKGZpbGVwYXRoKToKICAgICAgICBhcnRpZmFjdF9wYXRoID0gY29udGV4dC5hcnRpZmFjdF9wYXRoCgogICAgICAgICMgcmVhY2ggaW50byBtb2R1bGUgYW5kIGltcG9ydCB0aGUgYXBwcm9wcmlhdGUgbG9hZF94eHggZnVuY3Rpb24KICAgICAgICBwa2dfbW9kdWxlID0gJ3NrbGVhcm4uZGF0YXNldHMnCiAgICAgICAgZm5hbWUgPSBmJ2xvYWRfe2RhdGFzZXR9JwoKICAgICAgICBwa2dfbW9kdWxlID0gX19pbXBvcnRfXyhwa2dfbW9kdWxlLCBmcm9tbGlzdD1bZm5hbWVdKQogICAgICAgIGxvYWRfZGF0YV9mbiA9IGdldGF0dHIocGtnX21vZHVsZSwgZm5hbWUpCiAgICAgICAgCiAgICAgICAgZGF0YSA9IGxvYWRfZGF0YV9mbigqKnBhcmFtcykKICAgICAgICBmZWF0dXJlX25hbWVzID0gZGF0YVsnZmVhdHVyZV9uYW1lcyddCgogICAgICAgICMgc2F2ZQogICAgICAgIHh5ID0gbnAuY29uY2F0ZW5hdGUoW2RhdGFbJ2RhdGEnXSwgZGF0YVsndGFyZ2V0J10ucmVzaGFwZSgtMSwgMSldLCBheGlzPTEpCiAgICAgICAgaWYgaGFzYXR0cihmZWF0dXJlX25hbWVzLCAnYXBwZW5kJyk6CiAgICAgICAgICAgICMgaXRzIGEgbGlzdAogICAgICAgICAgICBmZWF0dXJlX25hbWVzLmFwcGVuZCgnbGFiZWxzJykKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIGl0cyBhbiBhcnJheQogICAgICAgICAgICBmZWF0dXJlX25hbWVzID0gbnAuYXBwZW5kKGZlYXR1cmVfbmFtZXMsICdsYWJlbHMnKQogICAgICAgIGRmID0gcGQuRGF0YUZyYW1lKGRhdGE9eHksIGNvbHVtbnM9ZmVhdHVyZV9uYW1lcykKICAgICAgICBkZi50b19wYXJxdWV0KGZpbGVwYXRoLCBlbmdpbmU9J3B5YXJyb3cnLCBpbmRleD1GYWxzZSkKICAgICAgICAKICAgICMgZWl0aGVyIHdlIGp1c3QgZG93bmxvYWRlZCBmaWxlLCBvciBpdCBleGlzdHMsIGxvZyBpdDoKICAgIGNvbnRleHQubG9nX2FydGlmYWN0KGRhdGFzZXQsIGxvY2FsX3BhdGg9ZmlsZXBhdGguc3BsaXQoJy8nKVstMV0pCiAgICAgICAg
    commands: []
    code_origin: /User/functions/load_dataset/function.yaml
