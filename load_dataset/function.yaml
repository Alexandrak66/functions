kind: job
metadata:
  name: load-dataset
  tag: ''
  hash: 34220ff439158ad0a8feb83bba748fb0834c9534
  project: ''
  labels:
    author: yjb
    stage: development
  categories:
  - datagen
  - fileutils
spec:
  command: ''
  args: []
  image: mlrun/ml-models:0.4.6
  env: []
  default_handler: get_toy_data
  description: ''
  image_pull_policy: Always
  build:
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOCBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAojCiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiMgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoKaW1wb3J0IG51bXB5IGFzIG5wCmltcG9ydCBwYW5kYXMgYXMgcGQKZnJvbSBtbHJ1bi5leGVjdXRpb24gaW1wb3J0IE1MQ2xpZW50Q3R4CgoKZGVmIGdldF90b3lfZGF0YSgKICAgICAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgICAgICBkYXRhc2V0OiBzdHIsCiAgICAgICAgZm9ybWF0OiBzdHIgPSAncHEnLAogICAgICAgIG5hbWU6IHN0ciA9ICcnLAogICAgICAgIHBhcmFtczogZGljdCA9IHt9CikgLT4gTm9uZToKICAgICIiIkxvYWRzIGEgc2Npa2l0LWxlYXJuIHRveSBkYXRhc2V0IGZvciBjbGFzc2lmaWNhdGlvbiBvciByZWdyZXNzaW9uCgogICAgVGhlIGZvbGxvd2luZyBkYXRhc2V0cyBhcmUgYXZhaWxhYmxlICgnbmFtZScgOiBkZXNyaXB0aW9uKToKCiAgICAgICAgJ2Jvc3RvbicgICAgICAgICAgOiBib3N0b24gaG91c2UtcHJpY2VzIGRhdGFzZXQgKHJlZ3Jlc3Npb24pCiAgICAgICAgJ2lyaXMnICAgICAgICAgICAgOiBpcmlzIGRhdGFzZXQgKGNsYXNzaWZpY2F0aW9uKQogICAgICAgICdkaWFiZXRlcycgICAgICAgIDogZGlhYmV0ZXMgZGF0YXNldCAocmVncmVzc2lvbikKICAgICAgICAnZGlnaXRzJyAgICAgICAgICA6IGRpZ2l0cyBkYXRhc2V0IChjbGFzc2lmaWNhdGlvbikKICAgICAgICAnbGlubmVydWQnICAgICAgICA6IGxpbm5lcnVkIGRhdGFzZXQgKG11bHRpdmFyaWF0ZSByZWdyZXNzaW9uKQogICAgICAgICd3aW5lJyAgICAgICAgICAgIDogd2luZSBkYXRhc2V0IChjbGFzc2lmaWNhdGlvbikKICAgICAgICAnYnJlYXN0X2NhbmNlcicgICA6IGJyZWFzdCBjYW5jZXIgd2lzY29uc2luIGRhdGFzZXQgKGNsYXNzaWZpY2F0aW9uKQoKICAgIFRoZSBzY2lraXQtbGVhcm4gZnVuY3Rpb25zIHJldHVybiBhIGRhdGEgYnVuY2ggaW5jbHVkaW5nIHRoZSBmb2xsb3dpbmcgaXRlbXM6CiAgICAtIGRhdGEgICAgICAgICAgICAgIHRoZSBmZWF0dXJlcyBtYXRyaXgKICAgIC0gdGFyZ2V0ICAgICAgICAgICAgdGhlIGdyb3VuZCB0cnV0aCBsYWJlbHMKICAgIC0gREVTQ1IgICAgICAgICAgICAgYSBkZXNjcmlwdGlvbiBvZiB0aGUgZGF0YXNldAogICAgLSBmZWF0dXJlX25hbWVzICAgICBoZWFkZXIgZm9yIGRhdGEKCiAgICBUaGUgZmVhdHVyZXMgKGFuZCB0aGVpciBuYW1lcykgYXJlIHN0b3JlZCB3aXRoIHRoZSB0YXJnZXQgbGFiZWxzIGluIGEgRGF0YUZyYW1lLgoKICAgIEZvciBmdXJ0aGVyIGRldGFpbHMgc2VlIGh0dHBzOi8vc2Npa2l0LWxlYXJuLm9yZy9zdGFibGUvZGF0YXNldHMvaW5kZXguaHRtbCN0b3ktZGF0YXNldHMKCiAgICA6cGFyYW0gY29udGV4dDogICAgZnVuY3Rpb24gZXhlY3V0aW9uIGNvbnRleHQKICAgIDpwYXJhbSBkYXRhc2V0OiAgICBuYW1lIG9mIHRoZSBkYXRhc2V0IHRvIGxvYWQKICAgIDpwYXJhbSBmb3JtYXQ6ICAgICBvdXRwdXQgZm9ybWF0OiBwcSBvciBjc3YKICAgIDpwYXJhbSBuYW1lOiAgICAgICBhcnRpZmFjdCBuYW1lIChkZWZhdWx0cyB0byBkYXRhc2V0KQogICAgOnBhcmFtIHBhcmFtczogICAgIHBhcmFtcyBvZiB0aGUgc2tsZWFybiBsb2FkX2RhdGEgbWV0aG9kCiAgICAiIiIKCiAgICAjIHJlYWNoIGludG8gbW9kdWxlIGFuZCBpbXBvcnQgdGhlIGFwcHJvcHJpYXRlIGxvYWRfeHh4IGZ1bmN0aW9uCiAgICBwa2dfbW9kdWxlID0gJ3NrbGVhcm4uZGF0YXNldHMnCiAgICBmbmFtZSA9IGYnbG9hZF97ZGF0YXNldH0nCgogICAgcGtnX21vZHVsZSA9IF9faW1wb3J0X18ocGtnX21vZHVsZSwgZnJvbWxpc3Q9W2ZuYW1lXSkKICAgIGxvYWRfZGF0YV9mbiA9IGdldGF0dHIocGtnX21vZHVsZSwgZm5hbWUpCgogICAgZGF0YSA9IGxvYWRfZGF0YV9mbigqKnBhcmFtcykKICAgIGZlYXR1cmVfbmFtZXMgPSBkYXRhWydmZWF0dXJlX25hbWVzJ10KCiAgICAjIGNyZWF0ZSB0aGUgdG95IGRhdGFzZXQKICAgIHh5ID0gbnAuY29uY2F0ZW5hdGUoW2RhdGFbJ2RhdGEnXSwgZGF0YVsndGFyZ2V0J10ucmVzaGFwZSgtMSwgMSldLCBheGlzPTEpCiAgICBpZiBoYXNhdHRyKGZlYXR1cmVfbmFtZXMsICdhcHBlbmQnKToKICAgICAgICAjIGl0cyBhIGxpc3QKICAgICAgICBmZWF0dXJlX25hbWVzLmFwcGVuZCgnbGFiZWxzJykKICAgIGVsc2U6CiAgICAgICAgIyBpdHMgYW4gYXJyYXkKICAgICAgICBmZWF0dXJlX25hbWVzID0gbnAuYXBwZW5kKGZlYXR1cmVfbmFtZXMsICdsYWJlbHMnKQogICAgZGYgPSBwZC5EYXRhRnJhbWUoZGF0YT14eSwgY29sdW1ucz1mZWF0dXJlX25hbWVzKQoKICAgICMgbG9nIGFuZCB1cGxvYWQgdGhlIGRhdGFzZXQKICAgIGNvbnRleHQubG9nX2RhdGFzZXQobmFtZSBvciBkYXRhc2V0LCBkZj1kZiwgZm9ybWF0PWZvcm1hdCwgaW5kZXg9RmFsc2Up
    commands: []
    code_origin: /User/functions/load_dataset/function.yaml
