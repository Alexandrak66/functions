kind: job
metadata:
  name: load-dataset
  tag: ''
  hash: 3174125bedca40ae5e9f90f68e96744298df449a
  project: ''
  labels:
    author: yjb
    stage: development
  categories:
  - datagen
  - fileutils
spec:
  command: ''
  args: []
  image: mlrun/ml-models:0.4.5
  env: []
  default_handler: get_toy_data
  description: ''
  image_pull_policy: Always
  build:
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOCBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAojCiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiMgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgppbXBvcnQgb3MKaW1wb3J0IGpzb24KZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQgcGFuZGFzIGFzIHBkCmZyb20gY2xvdWRwaWNrbGUgaW1wb3J0IGR1bXAsIGxvYWQKCmZyb20gbWxydW4uZXhlY3V0aW9uIGltcG9ydCBNTENsaWVudEN0eApmcm9tIG1scnVuLmRhdGFzdG9yZSBpbXBvcnQgRGF0YUl0ZW0KCmZyb20gdHlwaW5nIGltcG9ydCBJTywgQW55U3RyLCBVbmlvbiwgTGlzdCwgT3B0aW9uYWwKCmRlZiBnZXRfdG95X2RhdGEoCiAgICBjb250ZXh0OiBNTENsaWVudEN0eCwKICAgIGRhdGFzZXQ6IHN0ciwKICAgIHBhcmFtczogZGljdCA9IHt9CikgLT4gTm9uZToKICAgICIiIkxvYWRzIGEgc2Npa2l0LWxlYXJuIHRveSBkYXRhc2V0IGZvciBjbGFzc2lmaWNhdGlvbiBvciByZWdyZXNzaW9uCiAgICAKICAgIFRoZSBmb2xsb3dpbmcgZGF0YXNldHMgYXJlIGF2YWlsYWJsZSAoJ25hbWUnIDogZGVzcmlwdGlvbik6CiAgICAKICAgICAgICAnYm9zdG9uJyAgICAgICAgICA6IGJvc3RvbiBob3VzZS1wcmljZXMgZGF0YXNldCAocmVncmVzc2lvbikKICAgICAgICAnaXJpcycgICAgICAgICAgICA6IGlyaXMgZGF0YXNldCAoY2xhc3NpZmljYXRpb24pCiAgICAgICAgJ2RpYWJldGVzJyAgICAgICAgOiBkaWFiZXRlcyBkYXRhc2V0IChyZWdyZXNzaW9uKQogICAgICAgICdkaWdpdHMnICAgICAgICAgIDogZGlnaXRzIGRhdGFzZXQgKGNsYXNzaWZpY2F0aW9uKQogICAgICAgICdsaW5uZXJ1ZCcgICAgICAgIDogbGlubmVydWQgZGF0YXNldCAobXVsdGl2YXJpYXRlIHJlZ3Jlc3Npb24pCiAgICAgICAgJ3dpbmUnICAgICAgICAgICAgOiB3aW5lIGRhdGFzZXQgKGNsYXNzaWZpY2F0aW9uKQogICAgICAgICdicmVhc3RfY2FuY2VyJyAgIDogYnJlYXN0IGNhbmNlciB3aXNjb25zaW4gZGF0YXNldCAoY2xhc3NpZmljYXRpb24pCiAgICAKICAgIFRoZSBzY2lraXQtbGVhcm4gZnVuY3Rpb25zIHJldHVybiBhIGRhdGEgYnVuY2ggaW5jbHVkaW5nIHRoZSBmb2xsb3dpbmcgaXRlbXM6CiAgICAtIGRhdGEgICAgICAgICAgICAgIHRoZSBmZWF0dXJlcyBtYXRyaXgKICAgIC0gdGFyZ2V0ICAgICAgICAgICAgdGhlIGdyb3VuZCB0cnV0aCBsYWJlbHMKICAgIC0gREVTQ1IgICAgICAgICAgICAgYSBkZXNjcmlwdGlvbiBvZiB0aGUgZGF0YXNldAogICAgLSBmZWF0dXJlX25hbWVzICAgICBoZWFkZXIgZm9yIGRhdGEKICAgIAogICAgVGhlIGZlYXR1cmVzIChhbmQgdGhlaXIgbmFtZXMpIGFyZSBzdG9yZWQgd2l0aCB0aGUgdGFyZ2V0IGxhYmVscyBpbiBhIERhdGFGcmFtZS4KCiAgICBGb3IgZnVydGhlciBkZXRhaWxzIHNlZSBodHRwczovL3NjaWtpdC1sZWFybi5vcmcvc3RhYmxlL2RhdGFzZXRzL2luZGV4Lmh0bWwjdG95LWRhdGFzZXRzCiAgICAKICAgIDpwYXJhbSBjb250ZXh0OiAgICBmdW5jdGlvbiBleGVjdXRpb24gY29udGV4dAogICAgOnBhcmFtIGRhdGFzZXQ6ICAgIG5hbWUgb2YgdGhlIGRhdGFzZXQgdG8gbG9hZCAKICAgIDpwYXJhbSBwYXJhbXM6ICAgICBwYXJhbXMgb2YgdGhlIHNrbGVhcm4gbG9hZF9kYXRhIG1ldGhvZAogICAgIiIiCiAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihjb250ZXh0LmFydGlmYWN0X3BhdGgsIGRhdGFzZXQpICsgJy5wcXQnCiAgICAKICAgICMgY2hlY2sgdG8gc2VlIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSBkb3dubG9hZGVkIHRoZSBmaWxlCiAgICBpZiBub3Qgb3MucGF0aC5pc2ZpbGUoZmlsZXBhdGgpOgogICAgICAgIGFydGlmYWN0X3BhdGggPSBjb250ZXh0LmFydGlmYWN0X3BhdGgKCiAgICAgICAgIyByZWFjaCBpbnRvIG1vZHVsZSBhbmQgaW1wb3J0IHRoZSBhcHByb3ByaWF0ZSBsb2FkX3h4eCBmdW5jdGlvbgogICAgICAgIHBrZ19tb2R1bGUgPSAnc2tsZWFybi5kYXRhc2V0cycKICAgICAgICBmbmFtZSA9IGYnbG9hZF97ZGF0YXNldH0nCgogICAgICAgIHBrZ19tb2R1bGUgPSBfX2ltcG9ydF9fKHBrZ19tb2R1bGUsIGZyb21saXN0PVtmbmFtZV0pCiAgICAgICAgbG9hZF9kYXRhX2ZuID0gZ2V0YXR0cihwa2dfbW9kdWxlLCBmbmFtZSkKICAgICAgICAKICAgICAgICBkYXRhID0gbG9hZF9kYXRhX2ZuKCoqcGFyYW1zKQogICAgICAgIGZlYXR1cmVfbmFtZXMgPSBkYXRhWydmZWF0dXJlX25hbWVzJ10KCiAgICAgICAgIyBzYXZlCiAgICAgICAgeHkgPSBucC5jb25jYXRlbmF0ZShbZGF0YVsnZGF0YSddLCBkYXRhWyd0YXJnZXQnXS5yZXNoYXBlKC0xLCAxKV0sIGF4aXM9MSkKICAgICAgICBpZiBoYXNhdHRyKGZlYXR1cmVfbmFtZXMsICdhcHBlbmQnKToKICAgICAgICAgICAgIyBpdHMgYSBsaXN0CiAgICAgICAgICAgIGZlYXR1cmVfbmFtZXMuYXBwZW5kKCdsYWJlbHMnKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgICMgaXRzIGFuIGFycmF5CiAgICAgICAgICAgIGZlYXR1cmVfbmFtZXMgPSBucC5hcHBlbmQoZmVhdHVyZV9uYW1lcywgJ2xhYmVscycpCiAgICAgICAgZGYgPSBwZC5EYXRhRnJhbWUoZGF0YT14eSwgY29sdW1ucz1mZWF0dXJlX25hbWVzKQogICAgICAgIGRmLnRvX3BhcnF1ZXQoZmlsZXBhdGgsIGVuZ2luZT0ncHlhcnJvdycsIGluZGV4PUZhbHNlKQogICAgICAgIAogICAgIyBlaXRoZXIgd2UganVzdCBkb3dubG9hZGVkIGZpbGUsIG9yIGl0IGV4aXN0cywgbG9nIGl0OgogICAgY29udGV4dC5sb2dfYXJ0aWZhY3QoZGF0YXNldCwgbG9jYWxfcGF0aD1maWxlcGF0aC5zcGxpdCgnLycpWy0xXSkKICAgICAgICA=
    commands: []
    code_origin: /User/functions/load_dataset/function.yaml
