kind: job
metadata:
  name: create-classification-data
  tag: ''
  hash: 82f12c2c7cc0b8f6463eb3fe6be2b3d44d98d88e
  project: ''
  labels:
    author: yjb
    stage: development
  categories:
  - datagen
  - fileutils
spec:
  command: ''
  args: []
  image: mlrun/ml-models:0.4.6
  env: []
  default_handler: create_classification_data
  entry_points:
    create_classification_data:
      name: create_classification_data
      doc: 'Create a binary classification sample dataset and save.

        If no filename is given it will default to:

        ''simdata-{n_samples}X{m_features}.parquet''.


        Additional scikit-learn parameters can be set using **sk_params, please see
        https://scikit-learn.org/stable/modules/generated/sklearn.datasets.make_classification.html
        for more details.'
      parameters:
      - name: context
        type: MLClientCtx
        doc: function context
      - name: n_samples
        type: int
        doc: number of rows/samples
      - name: m_features
        type: int
        doc: number of cols/features
      - name: k_classes
        type: int
        doc: number of classes
      - name: header
        type: Optional[List[str]]
        doc: header for features array
      - name: label_column
        type: Optional[str]
        doc: column name of ground-truth series
        default: labels
      - name: weight
        type: float
        doc: fraction of sample negative value (ground-truth=0)
        default: 0.5
      - name: random_state
        type: int
        doc: rng seed (see https://scikit-learn.org/stable/glossary.html#term-random-state)
        default: 1
      - name: filename
        type: Optional[str]
        doc: optional name for saving simulated data file
      - name: key
        type: str
        doc: key of data in artifact store
        default: classifier-data
      - name: file_ext
        type: str
        doc: (pqt) extension for parquet file
        default: pqt
      - name: sk_params
        doc: additional `sklearn.datasets.make_classification`
      outputs: []
      lineno: 24
  description: ''
  image_pull_policy: Always
  build:
    functionSourceCode: IyBDb3B5cmlnaHQgMjAxOSBJZ3VhemlvCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAojCiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQojIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiMgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAojIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgppbXBvcnQgb3MKaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgcHlhcnJvdyBhcyBwYQppbXBvcnQgcHlhcnJvdy5wYXJxdWV0IGFzIHBxCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgTGlzdCwgQW55CmZyb20gc2tsZWFybi5kYXRhc2V0cyBpbXBvcnQgbWFrZV9jbGFzc2lmaWNhdGlvbgoKZnJvbSBtbHJ1bi5leGVjdXRpb24gaW1wb3J0IE1MQ2xpZW50Q3R4CgoKZGVmIGNyZWF0ZV9jbGFzc2lmaWNhdGlvbl9kYXRhKAogICAgY29udGV4dDogTUxDbGllbnRDdHgsCiAgICBuX3NhbXBsZXM6IGludCwKICAgIG1fZmVhdHVyZXM6IGludCwKICAgIGtfY2xhc3NlczogaW50LAogICAgaGVhZGVyOiBPcHRpb25hbFtMaXN0W3N0cl1dLAogICAgbGFiZWxfY29sdW1uOiBPcHRpb25hbFtzdHJdID0gJ2xhYmVscycsCiAgICB3ZWlnaHQ6IGZsb2F0ID0gMC41LAogICAgcmFuZG9tX3N0YXRlOiBpbnQgPSAxLAogICAgZmlsZW5hbWU6IE9wdGlvbmFsW3N0cl0gPSBOb25lLAogICAga2V5OiBzdHIgPSAnY2xhc3NpZmllci1kYXRhJywgCiAgICBmaWxlX2V4dDogc3RyID0gJ3BxdCcsCiAgICBza19wYXJhbXMgPSB7fQopOgogICAgIiIiQ3JlYXRlIGEgYmluYXJ5IGNsYXNzaWZpY2F0aW9uIHNhbXBsZSBkYXRhc2V0IGFuZCBzYXZlLgogICAgSWYgbm8gZmlsZW5hbWUgaXMgZ2l2ZW4gaXQgd2lsbCBkZWZhdWx0IHRvOgogICAgJ3NpbWRhdGEte25fc2FtcGxlc31Ye21fZmVhdHVyZXN9LnBhcnF1ZXQnLgogICAgCiAgICBBZGRpdGlvbmFsIHNjaWtpdC1sZWFybiBwYXJhbWV0ZXJzIGNhbiBiZSBzZXQgdXNpbmcgKipza19wYXJhbXMsIHBsZWFzZSBzZWUgaHR0cHM6Ly9zY2lraXQtbGVhcm4ub3JnL3N0YWJsZS9tb2R1bGVzL2dlbmVyYXRlZC9za2xlYXJuLmRhdGFzZXRzLm1ha2VfY2xhc3NpZmljYXRpb24uaHRtbCBmb3IgbW9yZSBkZXRhaWxzLgogICAgCiAgICA6cGFyYW0gY29udGV4dDogICAgICAgZnVuY3Rpb24gY29udGV4dAogICAgOnBhcmFtIG5fc2FtcGxlczogICAgIG51bWJlciBvZiByb3dzL3NhbXBsZXMKICAgIDpwYXJhbSBtX2ZlYXR1cmVzOiAgICBudW1iZXIgb2YgY29scy9mZWF0dXJlcwogICAgOnBhcmFtIGtfY2xhc3NlczogICAgIG51bWJlciBvZiBjbGFzc2VzCiAgICA6cGFyYW0gaGVhZGVyOiAgICAgICAgaGVhZGVyIGZvciBmZWF0dXJlcyBhcnJheQogICAgOnBhcmFtIGxhYmVsX2NvbHVtbjogIGNvbHVtbiBuYW1lIG9mIGdyb3VuZC10cnV0aCBzZXJpZXMKICAgIDpwYXJhbSB3ZWlnaHQ6ICAgICAgICBmcmFjdGlvbiBvZiBzYW1wbGUgbmVnYXRpdmUgdmFsdWUgKGdyb3VuZC10cnV0aD0wKQogICAgOnBhcmFtIHJhbmRvbV9zdGF0ZTogIHJuZyBzZWVkIChzZWUgaHR0cHM6Ly9zY2lraXQtbGVhcm4ub3JnL3N0YWJsZS9nbG9zc2FyeS5odG1sI3Rlcm0tcmFuZG9tLXN0YXRlKQogICAgOnBhcmFtIGZpbGVuYW1lOiAgICAgIG9wdGlvbmFsIG5hbWUgZm9yIHNhdmluZyBzaW11bGF0ZWQgZGF0YSBmaWxlCiAgICA6cGFyYW0ga2V5OiAgICAgICAgICAga2V5IG9mIGRhdGEgaW4gYXJ0aWZhY3Qgc3RvcmUKICAgIDpwYXJhbSBmaWxlX2V4dDogICAgICAocHF0KSBleHRlbnNpb24gZm9yIHBhcnF1ZXQgZmlsZQogICAgOnBhcmFtIHNrX3BhcmFtczogICAgIGFkZGl0aW9uYWwgYHNrbGVhcm4uZGF0YXNldHMubWFrZV9jbGFzc2lmaWNhdGlvbmAKICAgIAogICAgb3V0cHV0cyBmaWxlbmFtZSBvZiBjcmVhdGVkIGRhdGEgKGluY2x1ZGVzIHBhdGgpIGluIHRoZSBhcnRpZmFjdCBzdG9yZS4KICAgICIiIgogICAgb3MubWFrZWRpcnMoY29udGV4dC5hcnRpZmFjdF9wYXRoLCBleGlzdF9vaz1UcnVlKQogICAgaWYgbm90IGZpbGVuYW1lOgogICAgICAgIG5hbWUgPSBmInNpbWRhdGEte25fc2FtcGxlczowLjBlfVh7bV9mZWF0dXJlc30ue2ZpbGVfZXh0fSIucmVwbGFjZSgiKyIsICIiKQogICAgICAgIGZpbGVuYW1lID0gb3MucGF0aC5qb2luKGNvbnRleHQuYXJ0aWZhY3RfcGF0aCwgbmFtZSkKICAgIGVsc2U6CiAgICAgICAgZmlsZW5hbWUgPSBvcy5wYXRoLmpvaW4oY29udGV4dC5hcnRpZmFjdF9wYXRoLCBmaWxlbmFtZSkKICAgIAogICAgZmVhdHVyZXMsIGxhYmVscyA9IG1ha2VfY2xhc3NpZmljYXRpb24oCiAgICAgICAgbl9zYW1wbGVzPW5fc2FtcGxlcywKICAgICAgICBuX2ZlYXR1cmVzPW1fZmVhdHVyZXMsCiAgICAgICAgd2VpZ2h0cz13ZWlnaHQsCiAgICAgICAgbl9jbGFzc2VzPWtfY2xhc3NlcywKICAgICAgICByYW5kb21fc3RhdGU9cmFuZG9tX3N0YXRlLCAKICAgICAgICAqKnNrX3BhcmFtcykKCiAgICAjIG1ha2UgZGF0YWZyYW1lcywgYWRkIGNvbHVtbiBuYW1lcywgY29uY2F0ZW5hdGUgKFgsIHkpCiAgICBYID0gcGQuRGF0YUZyYW1lKGZlYXR1cmVzKQogICAgaWYgbm90IGhlYWRlcjoKICAgICAgICBYLmNvbHVtbnMgPSBbImZlYXRfIiArIHN0cih4KSBmb3IgeCBpbiByYW5nZShtX2ZlYXR1cmVzKV0KICAgIGVsc2U6CiAgICAgICAgWC5jb2x1bW5zID0gaGVhZGVyCgogICAgeSA9IHBkLkRhdGFGcmFtZShsYWJlbHMsIGNvbHVtbnM9W2xhYmVsX2NvbHVtbl0pCiAgICBkYXRhID0gcGQuY29uY2F0KFtYLCB5XSwgYXhpcz0xKQoKICAgIHBxLndyaXRlX3RhYmxlKHBhLlRhYmxlLmZyb21fcGFuZGFzKGRhdGEpLCBmaWxlbmFtZSkKICAgIGNvbnRleHQubG9nX2FydGlmYWN0KGtleSwgbG9jYWxfcGF0aD1uYW1lKQo=
    commands: []
    code_origin: /User/functions/create_classification_data/function.yaml
